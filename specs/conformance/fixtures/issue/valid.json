{
  "$comment": "Valid Issue() input golden vectors for cross-language conformance (v0.9.29+)",
  "version": "0.9.29",
  "fixtures": [
    {
      "name": "minimal-receipt",
      "description": "Minimal valid issue options - only required fields",
      "input": {
        "iss": "https://publisher.example",
        "aud": "https://agent.example",
        "amt": 1000,
        "cur": "USD",
        "rail": "stripe",
        "reference": "ch_abc123"
      },
      "expected": {
        "valid": true,
        "claims": {
          "iss": "https://publisher.example",
          "aud": "https://agent.example",
          "amt": 1000,
          "cur": "USD",
          "payment": {
            "rail": "stripe",
            "reference": "ch_abc123",
            "amount": 1000,
            "currency": "USD"
          }
        }
      }
    },
    {
      "name": "full-receipt",
      "description": "Full issue options with all optional fields",
      "input": {
        "iss": "https://publisher.example",
        "aud": "https://agent.example",
        "amt": 9999,
        "cur": "EUR",
        "rail": "stripe",
        "reference": "pi_xyz789",
        "asset": "EUR",
        "env": "live",
        "network": "card",
        "facilitator_ref": "facil_123",
        "idempotency_key": "idem_456",
        "subject": "https://resource.example/api/v1/data",
        "evidence": {
          "session_id": "sess_abc",
          "metadata": {
            "source": "api"
          }
        }
      },
      "expected": {
        "valid": true,
        "claims": {
          "iss": "https://publisher.example",
          "aud": "https://agent.example",
          "amt": 9999,
          "cur": "EUR",
          "subject": {
            "uri": "https://resource.example/api/v1/data"
          },
          "payment": {
            "rail": "stripe",
            "reference": "pi_xyz789",
            "amount": 9999,
            "currency": "EUR",
            "asset": "EUR",
            "env": "live",
            "network": "card",
            "facilitator_ref": "facil_123",
            "idempotency_key": "idem_456"
          }
        }
      }
    },
    {
      "name": "zero-amount",
      "description": "Zero amount receipt (valid for free tier)",
      "input": {
        "iss": "https://publisher.example",
        "aud": "https://agent.example",
        "amt": 0,
        "cur": "USD",
        "rail": "free",
        "reference": "free_tier_123"
      },
      "expected": {
        "valid": true,
        "claims": {
          "amt": 0
        }
      }
    },
    {
      "name": "with-purpose",
      "description": "Receipt with purpose tracking (v0.9.24+)",
      "input": {
        "iss": "https://publisher.example",
        "aud": "https://agent.example",
        "amt": 500,
        "cur": "USD",
        "rail": "stripe",
        "reference": "ch_purpose123",
        "purpose": ["inference", "train"],
        "purpose_enforced": "inference",
        "purpose_reason": "constrained"
      },
      "expected": {
        "valid": true,
        "claims": {
          "purpose_declared": ["inference", "train"],
          "purpose_enforced": "inference",
          "purpose_reason": "constrained"
        }
      }
    },
    {
      "name": "with-expiry",
      "description": "Receipt with explicit expiry timestamp",
      "input": {
        "iss": "https://publisher.example",
        "aud": "https://agent.example",
        "amt": 1000,
        "cur": "USD",
        "rail": "stripe",
        "reference": "ch_exp123",
        "exp": 1736553600
      },
      "expected": {
        "valid": true,
        "claims": {
          "exp": 1736553600
        }
      }
    },
    {
      "name": "crypto-rail",
      "description": "Cryptocurrency payment rail with network",
      "input": {
        "iss": "https://publisher.example",
        "aud": "https://agent.example",
        "amt": 1000000,
        "cur": "USDC",
        "rail": "x402",
        "reference": "0xabc123def456",
        "asset": "USDC",
        "network": "eip155:8453",
        "env": "live"
      },
      "expected": {
        "valid": true,
        "claims": {
          "payment": {
            "rail": "x402",
            "network": "eip155:8453",
            "asset": "USDC"
          }
        }
      }
    },
    {
      "name": "large-amount",
      "description": "Large amount within int64 range",
      "input": {
        "iss": "https://publisher.example",
        "aud": "https://agent.example",
        "amt": 999999999999,
        "cur": "JPY",
        "rail": "stripe",
        "reference": "ch_large123"
      },
      "expected": {
        "valid": true,
        "claims": {
          "amt": 999999999999
        }
      }
    }
  ]
}
